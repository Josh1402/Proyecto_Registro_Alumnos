//<script type="text/jsx">

function Reportes() {
  const [filtro, setFiltro] = useState(null); // Estado para el filtro seleccionado
  const [datos, setDatos] = useState([]); // Estado para almacenar los datos de la base de datos

  const filtros = ["Fechas", "Materias", "Semestres", "Alumnos"];


  // Función para obtener y procesar los datos
  const listarfiltros = () => {
    google.script.run
      .withSuccessHandler((res) => {
        const filtro = JSON.parse(res); // Convertir la respuesta a JSON
        const arreglo = filtro.map((Reportes) => ({
          key: Reportes, // Asignar una clave única
          ...Reportes, // Incluir todas las propiedades del usuario
          acciones: (
            <Button
              onClick={() => {
                history.push("/Filtros/" + Reportes);
              }}
            >
              Editar
            </Button>
          ), // Agregar columna de acciones
        }));
        setDatos(arreglo); // Actualizar el estado con los datos procesados
      })
      .withFailureHandler((error) => {
        console.error("Error al obtener los datos:", error);
      })
      .listarfiltros(); // Llamar a la función del backend
  };

  // Obtener datos al cargar el componente
  useEffect(() => {
    listarfiltros();
  }, []);



  // Columnas de la tabla para Fechas
  const columnsfecha = [
    {
      title: (
        <div>
          <div style={{ fontWeight: "bold", fontSize: "16px", textAlign: "center" }}>Fecha</div>
          <div style={{ display: "flex", justifyContent: "space-between", fontSize: "12px", color: "#666" }}>
            <span>Fechas</span>
            <span>Materias</span>
            <span>Semestres</span>
            <span>Alumnos</span>
          </div>
        </div>
      ),
      dataIndex: "fecha",
      key: "fecha",
    },
  ];

  // Columnas de la tabla para Materias
  const columnsmateria = [
    {
      title: (
        <div>
          <div style={{ fontWeight: "bold", fontSize: "16px", textAlign: "center" }}>Materia</div>
          <div style={{ display: "flex", justifyContent: "space-between", fontSize: "12px", color: "#666" }}>
            <span>Fechas</span>
            <span>Materias</span>
            <span>Semestres</span>
            <span>Alumnos</span>
          </div>
        </div>
      ),
      dataIndex: "materia",
      key: "materia",
    },
  ];

  // Columnas de la tabla para Semestres
  const columnssemestre = [
    {
      title: (
        <div>
          <div style={{ fontWeight: "bold", fontSize: "16px", textAlign: "center" }}>Semestre</div>
          <div style={{ display: "flex", justifyContent: "space-between", fontSize: "12px", color: "#666" }}>
            <span>Fechas</span>
            <span>Materias</span>
            <span>Semestres</span>
            <span>Alumnos</span>
          </div>
        </div>
      ),
      dataIndex: "semestre",
      key: "semestre",
    },
  ];

  // Columnas de la tabla para Alumnos
  const columnsalumno = [
    {
      title: (
        <div>
          <div style={{ fontWeight: "bold", fontSize: "16px", textAlign: "center" }}>Alumno</div>
          <div style={{ display: "flex", justifyContent: "space-between", fontSize: "12px", color: "#666" }}>
            <span>Fechas</span>
            <span>Materias</span>
            <span>Semestres</span>
            <span>Alumnos</span>
          </div>
        </div>
      ),
      dataIndex: "alumno",
      key: "alumno",
    },
  ];

  return (
    <div className="p-5">
      <h1 className="text-3xl font-bold mb-5">Reportes</h1>

      {/* Select para elegir el filtro */}
      <div className="text-left mb-5">
        <Select
          placeholder="Filtrar por"
          style={{ width: "20%" }} // Ajusta el ancho según sea necesario
          onChange={(value) => setFiltro(value)} // Actualiza el estado del filtro
        >
          {filtros.map((filtro) => (
            <Option key={filtro} value={filtro}>
              Por: {filtro}
            </Option>
          ))}
        </Select>
      </div>

      {/* Mostrar la tabla según el filtro seleccionado */}
      {filtro === "Fechas" && (
        <Table
          columns={columnsfecha} // Columnas de la tabla
          dataSource={datos} // Datos de la base de datos
          bordered
          pagination={false} // Desactiva la paginación
        />
      )}

      {filtro === "Materias" && (
        <Table
          columns={columnsmateria} // Columnas de la tabla
          dataSource={datos} // Datos de la base de datos
          bordered
          pagination={false} // Desactiva la paginación
        />
      )}

      {filtro === "Semestres" && (
        <Table
          columns={columnssemestre} // Columnas de la tabla
          dataSource={datos} // Datos de la base de datos
          bordered
          pagination={false} // Desactiva la paginación
        />
      )}

      {filtro === "Alumnos" && (
        <Table
          columns={columnsalumno} // Columnas de la tabla
          dataSource={datos} // Datos de la base de datos
          bordered
          pagination={false} // Desactiva la paginación
        />
      )}
    </div>
  );
}

//</script>